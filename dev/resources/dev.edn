{:duct.profile/base
 #duct/include "duct/base.api.edn"

 :duct.profile/dev
 {:com.ben-allred.audiophile.api.core/server
  ^:promote {:handler #ig/ref :com.ben-allred.audiophile.api.dev.handler/app}

  :com.ben-allred.audiophile.api.dev.handler/app
  {:app #ig/ref :com.ben-allred.audiophile.api.handlers.core/app}

  [:duct/const :routes/table]
  ^:promote {[:get :auth/login]    #ig/ref :com.ben-allred.audiophile.api.dev.handler/login
             [:get :auth/callback] #ig/ref :com.ben-allred.audiophile.api.dev.handler/callback}

  ;; components
  :com.ben-allred.audiophile.api.dev.handler/login
  {:base-url #ig/ref :env/base-url
   :nav      #ig/ref :services/nav}

  :com.ben-allred.audiophile.api.dev.handler/callback
  {:base-url  #ig/ref :env/base-url
   :jwt-serde #ig/ref :serdes/jwt
   :nav       #ig/ref :services/nav
   :tx        #ig/ref :services/transactor}}}
