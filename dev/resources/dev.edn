{:duct.profile/base
 #audiophile/merge
 [#duct/include "duct/api/base.edn"
  {[:duct/const :resources/migration-path]
   "db/migrations"}]

 :duct.profile/dev
 {[:duct/const :api/handler]
  #ig/ref :com.ben-allred.audiophile.api.dev.handler/app

  [:duct/const :services/s3-client]
  #ig/ref :com.ben-allred.audiophile.api.dev.handler/s3-client

  [:com.ben-allred.audiophile.api.core/server :duct/daemon]
  {:handler     #ig/ref :api/handler
   :server-port #ig/ref :env/server-port}

  :com.ben-allred.audiophile.api.dev.handler/app
  {:app #ig/ref :com.ben-allred.audiophile.api.handlers.core/app}

  [:duct/const :services/oauth]
  #ig/ref :com.ben-allred.audiophile.api.dev.handler/oauth

  :com.ben-allred.audiophile.api.dev.handler/s3-client
  {}

  :com.ben-allred.audiophile.api.dev.handler/oauth
  {:nav      #ig/ref :services/nav
   :base-url #ig/ref :env/base-url}}}
